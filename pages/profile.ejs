<!--
=========================================================
* BLK Design System- v1.0.0
=========================================================

* Product Page: https://www.creative-tim.com/product/blk-design-system
* Copyright 2019 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <title>
    involvesMe. | Profile
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <link href='https://fonts.googleapis.com/css?family=Quicksand' rel='stylesheet'>
  <!-- Nucleo Icons -->
  <link href="/css/nucleo-icons.css" rel="stylesheet" />
  <link href="/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link href="/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link id="pagestyle" href="/css/soft-design-system.css?v=1.0.5" rel="stylesheet" />
  <link href="/css/additional-styles.css" rel="stylesheet" />
  
  <!-- axios -->
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  <style>
    
.content-editable {
    caret-color: #ff7a18;
  }

  [contentEditable=true]:empty:before {
    content: attr(data-ph);
    color: grey;
    font-style: italic;
  }

  input[type="file"] {
    display: none;
  }

  .pp-upload {

    cursor: pointer;
  }

  .pp-upload-wrapper {
    position: absolute;
    right: 0;
  }
  </style>

</head>


<body>
  <section>
    <div class="page-header min-vh-100">
      <div class="container ">
        <div class="fixed-top container ">
          <div id="editing-mode-banner"
            class=" shadow alert alert-info text-white border-0 text-md p-3 d-none justify-content-between align-items-center mt-3"
            role="alert">
            <span class="alert-icon"><i class="fa fa-edit"></i> <span class="alert-text">You are currently in editing
                mode</span></span>

            <form>
              <button type="button" class="btn btn-sm btn-outline-light  btn-round m-0 " onclick="saveEdit()">Save
              </button>
              <button type="button" class="btn btn-sm btn-outline-light  btn-round m-0 " onclick="cancelEdit()">Discard
              </button>
            </form>
          </div>

          <div class="ml-auto d-flex justify-content-end  align-items-center mt-4 mb-4" id="edit-profile-btn">

            <button type="button" class="shadow btn btn-lg px-4 btn-primary btn-round m-0" onclick="enableEdit()">
              <i class="fas fa-user-edit"></i>
              <span>&nbsp;Edit profile</span>
            </button>
          </div>
        </div>

        <row class="d-flex flex-md-row  flex-column  justify-content-between py-4 mb-6 mt-8 ">


          <div class="col-lg-5 col-md-5">
            <h1 class="content-editable profile-title text-left" data-ph="Display Name" data-post="displayName">Mike
              Scheinder</h1>
            <!-- <h5 class="text-on-back">About me</h5> -->
            <p class="content-editable profile-description"
              data-ph="This is a space for you to tell people about yourself, your work, etc." data-post="bio">

              Offices parties lasting outward nothing age few resolve. Impression to
              discretion understood to we interested he excellence. Him remarkably use projection collecting. Going
              about eat forty world has round miles.</p>
          </div>


          <div class="col-lg-4 col-md-6 ml-auto mr-auto">
            <div class="card card-plain">
              <div class="card-header position-relative">
                <div class="pp-upload-wrapper d-none m-0">
                  <label for="profile-upload" class="pp-upload m-0 text-center p-0">
                    <div type="button" class="btn btn-xs btn-primary btn-round m-0">
                      <i class="fa fa-pencil" aria-hidden="true"></i>
                    </div>
                  </label>
                  <input onchange="loadFile()" type="file" name="profile-upload" id="profile-upload">
                </div>
                <img id="profile-pic" src="/img/mike.jpg" class="img-center img-fluid px-5 rounded-circle">

                <!-- <h4 class="title">Transactions</h4> -->
              </div>
              <div class="card-body">
                <!-- nav header -->
                <ul class="nav nav-tabs nav-tabs-primary justify-content-center">
                  <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#linka">
                      Wallet
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#linkb">
                      Send
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#linkc">
                      News
                    </a>
                  </li>
                </ul>

                <!-- tab content -->
                <div class="tab-content tab-subcategories">
                  <div class="tab-pane active" id="linka">
                    <div class="table-responsive">
                      <table class="table tablesorter " id="plain-table">
                        <thead class=" text-primary">
                          <tr>
                            <th class="header">
                              COIN
                            </th>
                            <th class="header">
                              AMOUNT
                            </th>
                            <th class="header">
                              VALUE
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
                              BTC
                            </td>
                            <td>
                              7.342
                            </td>
                            <td>
                              48,870.75 USD
                            </td>
                          </tr>
                          <tr>
                            <td>
                              ETH
                            </td>
                            <td>
                              30.737
                            </td>
                            <td>
                              64,53.30 USD
                            </td>
                          </tr>
                          <tr>
                            <td>
                              XRP
                            </td>
                            <td>
                              19.242
                            </td>
                            <td>
                              18,354.96 USD
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <div class="tab-pane" id="linkb">
                    <div class="row">
                      <label class="col-12 col-form-label">Pay to</label>
                      <div class="col-12">
                        <div class="form-group">
                          <input type="text" class="form-control" placeholder="e.g. 1Nasd92348hU984353hfid">
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <label class="col-12 col-form-label">Amount</label>
                      <div class="col-12">
                        <div class="form-group">
                          <input type="text" class="form-control" placeholder="1.587">
                        </div>
                      </div>
                    </div>
                    <button type="submit" class="btn btn-simple btn-primary btn-icon btn-round float-right">
                      <i class="fa fa-paper-plane" aria-hidden="true"></i>
                  </div>
                  <div class="tab-pane" id="linkc">
                    <div class="table-responsive">
                      <table class="table tablesorter " id="plain-table">
                        <thead class=" text-primary">
                          <tr>
                            <th class="header">
                              Latest Crypto News
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
                              The Daily: Nexo to Pay on Stable...
                            </td>
                          </tr>
                          <tr>
                            <td>
                              Venezuela Begins Public of Nation...
                            </td>
                          </tr>
                          <tr>
                            <td>
                              PR: BitCanna – Dutch Blockchain...
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </row>


        <row class="d-flex flex-md-row flex-column justify-content-between py-4 my-6">
          <div class="col-md-6">
            <div class="row justify-content-between align-items-center">
              <div id="storeCarousel" class="carousel" data-ride="carousel">
                <ol class="carousel-indicators">
                  <li data-target="#storeCarousel" data-slide-to="0" class="active"></li>
                  <li data-target="#storeCarousel" data-slide-to="1"></li>
                  <li data-target="#storeCarousel" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <img class="d-block w-100" src="/img/denys.jpg" alt="First slide">
                  </div>
                  <div class="carousel-item">
                    <img class="d-block w-100" src="/img/fabien-bazanegue.jpg" alt="Second slide">
                  </div>
                  <div class="carousel-item">
                    <img class="d-block w-100" src="/img/mark-finn.jpg" alt="Third slide">
                  </div>
                </div>

                <a class="carousel-control-prev" href="#storeCarousel" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#storeCarousel" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>
            </div>
          </div>

          <div class="col-md-5">
            <h1 class="content-editable profile-title text-left" data-ph="Store Name" data-post="storeName">Cool Merch
              Store</h1>
            <!-- <h5 class="text-on-back">02</h5> -->
            <p class="content-editable profile-description text-left"
              data-ph="This is a space for you to tell people about your store, what it is about, what products and services your offer etc."
              data-post="storeDesc">
              An artist of considerable
              range, Ryan — the
              name taken by
              Melbourne-raised, Brooklyn-based Nick Murphy — writes, performs and records all of his own music, giving
              it a warm, intimate feel with a solid groove structure. An artist of considerable range.</p>
            <div class="btn-wrapper pt-3">
              <button href="javascript:void(0)" class="btn btn-simple btn-primary">
                <i class="tim-icons icon-book-bookmark"></i> View
              </button>
              <button href="javascript:void(0)" class="btn btn-simple btn-info">
                <i class="tim-icons icon-bulb-63"></i> Edit
              </button>
            </div>
          </div>
        </row>


        <row class="d-flex flex-md-row flex-column   justify-content-between py-4  my-6">
          <div class="col-md-4">
            <div class="info info-horizontal">
              <div class="icon icon-primary">
                <i class="tim-icons icon-square-pin"></i>
              </div>
              <div class="description">
                <h4 class="info-title">Find us at the office</h4>
                <p> Bld Mihail Kogalniceanu, nr. 8,
                  <br> 7652 Bucharest,
                  <br> Romania
                </p>
              </div>
            </div>
            <div class="info info-horizontal">
              <div class="icon icon-primary">
                <i class="tim-icons icon-mobile"></i>
              </div>
              <div class="description">
                <h4 class="info-title">Give us a ring</h4>
                <p> Michael Jordan
                  <br> +40 762 321 762
                  <br> Mon - Fri, 8:00-22:00
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card card-plain">
              <div class="card-header">
                <h1 class="profile-title text-left">Contact</h1>
                <!-- <h5 class="text-on-back">03</h5> -->
              </div>
              <div class="card-body">
                <form>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Your Name</label>
                        <input type="text" class="form-control" value="Mike">
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Email address</label>
                        <input type="email" class="form-control" placeholder="mike@email.com">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Phone</label>
                        <input type="text" class="form-control" value="001-12321345">
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Company</label>
                        <input type="text" class="form-control" value="CreativeTim">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12">
                      <div class="form-group">
                        <label>Message</label>
                        <input type="text" class="form-control" placeholder="Hello there!">
                      </div>
                    </div>
                  </div>
                  <button type="submit" class="btn btn-primary btn-round float-right" rel="tooltip"
                    data-original-title="Can't wait for your message" data-placement="right">Send text</button>
                </form>
              </div>
            </div>
          </div>

        </row>
        <row></row>
      </div>
    </div>
  </section>


  <!-- Javascript for editing -->
  <script>
    var editableFields = document.getElementsByClassName('content-editable');
    var editProfileBtn = document.getElementById('edit-profile-btn');
    var editingModeBanner = document.getElementById('editing-mode-banner');
    var profilePicEdit = document.getElementsByClassName('pp-upload-wrapper');
    var editableFieldsValues = [];
    var formData = new FormData();

    function enableEdit() {
      // alert("hi")
      // e.preventDefault();
      console.log(editableFields)
      for (let i = 0; i < editableFields.length; i++) {
        editableFields[i].contentEditable = true;
        editableFieldsValues[i] = editableFields[i].innerHTML;
      }
      let profilePic = document.getElementById('profile-pic');
      editableFieldsValues.push(profilePic.src)
      editProfileBtn.classList.remove('d-flex');
      editProfileBtn.classList.add('d-none');
      editingModeBanner.classList.remove('d-none');
      editingModeBanner.classList.add('d-flex');
      editableFields[0].focus();
      profilePicEdit[0].classList.remove('d-none');
      profilePicEdit[0].classList.add('d-flex');
    }

    function disableEdit() {

      for (let i = 0; i < editableFields.length; i++) {
        editableFields[i].contentEditable = false;

      }
      editingModeBanner.classList.remove('d-flex');
      editingModeBanner.classList.add('d-none');
      editProfileBtn.classList.remove('d-none');
      editProfileBtn.classList.add('d-flex');
    }

    function saveEdit() {
      // e.preventDefault();
      // alert('save');

      disableEdit();
      let isAnyChange = false;
      for (let i = 0; i < editableFields.length; i++) {
        if (editableFieldsValues[i] != editableFields[i].innerHTML) {
          editableFieldsValues[i] = editableFields[i].innerHTML
          isAnyChange = true;
        }
      }

      if (isAnyChange) {
        // send post request to update profile
        const keys = [...editableFields].map(field => field.dataset.post);

        // let formData = {};

        keys.forEach((key, index) => {
          // console.log(key, editableFieldsValues[index])

          formData.append(key, editableFieldsValues[index]);

        });

        // formData = Object.assign(...keys.map((k, i) => ({
        //   [k]: editableFieldsValues[i]
        // })));



        axios.post('/profile/edit', formData, {
            headers: {
              'Content-Type': `multipart/form-data;`,
            }
          })
          .then(function (response) {
            console.log(response);
          })
          .catch(function (error) {
            console.log(error);
          });
      }
    }

    function cancelEdit() {
      // e.preventDefault();
      // alert('cancel');
      disableEdit();
      for (let i = 0; i < editableFields.length; i++) {
        editableFields[i].innerHTML = editableFieldsValues[i];
      }
      profilePicEdit[0].classList.add('d-none');
      profilePicEdit[0].classList.remove('d-flex');
      const profilePic = document.getElementById('profile-pic');
      profilePic.src = editableFieldsValues[editableFieldsValues.length - 1];

    }


    function loadFile() {
      var input = document.getElementById('profile-upload');
      var preview = document.getElementById('profile-pic');
      var file = input.files[0];
      console.log(file)
      var reader = new FileReader();

      reader.addEventListener("load", function () {
        preview.src = reader.result;
      }, false);

      if (file) {

        formData.append('profilePic', file);

        for (var pair of formData.entries()) {
          console.log(pair[1]);
        }
        reader.readAsDataURL(file);
      }
    }
  </script>
  <!--   Core JS Files   -->

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
  </script>
  <script src="/js/plugins/perfect-scrollbar.min.js"></script>
  <!--  Plugin for Parallax, full documentation here: https://github.com/wagerfield/parallax  -->
  <script src="/js/plugins/parallax.min.js"></script>
  <!-- Control Center for Soft UI Kit: parallax effects, scripts for the example pages etc -->
  <!--  Google Maps Plugin    -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTTfWur0PDbZWPr7Pmq8K3jiDp0_xUziI"></script>
  <script src="/js/soft-design-system.min.js?v=1.0.5" type="text/javascript"></script>
</body>

</html>