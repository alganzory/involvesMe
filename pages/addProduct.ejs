<!--
=========================================================
* Soft UI Design System - v1.0.5
=========================================================

* Product Page:  https://www.creative-tim.com/product/soft-ui-design-system 
* Copyright 2021 Creative Tim (https://www.creative-tim.com)

Coded by www.creative-tim.com

 =========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->
<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon.png" />
  <link rel="icon" type="image/png" href="/img/favicon.png" />
  <title> </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="/css/nucleo-icons.css" rel="stylesheet" />
  <link href="/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <link href="/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href="/css/soft-design-system.css?v=1.0.5" rel="stylesheet" />
  <link href="/css/additional-styles.css" rel="stylesheet" />
</head>

<body class="sign-in-illustration">
  <ul class="circles">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
  </ul>

  <section>
    <%- include('parts/nav-section.ejs') %>
    <div class="page-header min-vh-100">
      <div class="container-fluid px-1 py-5 mx-auto form-card">
        <div class="row d-flex justify-content-center">
          <div class="col-xl-7 col-lg-8 col-md-9 col-11 ">
            <div class="card p-4">
              <h4>Add Product</h4>
              <p class="text-sm mt-3">Add a new Product by filling in the required details of the product</p>
              <form action="/product/addProduct" method="POST" enctype="multipart/form-data">
                <!-- First Row -->
                <div class="row justify-content-between text-left">
                  <!-- Alert -->
                  <div class="form-group col-12 flex-column d-flex">
                    <div class="alert alert-danger text-white border-0 text-sm p-3 mt-3" id="errors"
                      style="display: none;" role="alert">
                    </div>
                  </div>
                  <div class="form-group col-sm-6 flex-column d-flex">
                    <!-- Name -->
                    <label for="name" class="form-check-label text-muted">Product Name:
                    </label>
                    <input type="text" name="name" class="form-control form-control-md" placeholder="Product Name"
                      aria-label="name" aria-describedby="name-addon" required />
                  </div>
                  <div class="form-group col-sm-6 flex-column d-flex">
                    <!-- Price -->
                    <label for="price" class="form-check-label text-muted">Price:
                    </label>
                    <input type="number" name="price" class="form-control form-control-md" step=".01" min="0"
                      placeholder="Price(RM)" aria-label="price" aria-describedby="text-addon" required />
                  </div>
                </div>
                <!-- Second Row -->
                <div class="row justify-content-between text-left">
                  <div class="form-group col-12 flex-column d-flex">
                    <!-- Description -->
                    <label for="description" class="form-check-label text-muted">Description:
                    </label>
                    <textarea name="description" class="form-control form-control-md" placeholder="Brief description of your product" id="description" cols="30" rows="3"></textarea>
                  </div>
                  
                </div>
                <!-- Third Row -->
                <div class="row justify-content-between text-left">
                  <div class="form-group col-sm-6 flex-column d-flex">
                    <!-- Size -->
                    <label for="size" class="form-check-label text-muted">Size:
                    </label>
                    <input type="text" name="size" class="form-control form-control-md" placeholder="Size(Optional)"
                      aria-label="size" aria-describedby="text-addon" />
                  </div>
                  <div class="form-group col-sm-6 flex-column d-flex">
                    <!-- Color -->
                    <label for="color" class="form-check-label text-muted">Color:
                    </label>
                    <input type="text" name="color" class="form-control form-control-md" placeholder="Color(Optional)"
                      aria-label="color" aria-describedby="text-addon" />
                  </div>
                </div>
                <!-- Forth Row -->
                <div class="row justify-content-between text-left">
                  <div class="form-group col-sm-6 flex-column d-flex">
                    <!-- Additional Details -->
                    <label for="additionalDetails" class="form-check-label text-muted">Additional Details:
                    </label>
                    <input type="text" name="additionalDetails" class="form-control form-control-md"
                      placeholder="Include any additional product details(Optional)" aria-label="additionalDetails"
                      aria-describedby="text-addon" />
                  </div>
                  <div class="form-group col-sm-6 flex-column d-flex">
                    <!-- Stock -->
                    <label for="stock" class="form-check-label text-muted">Stock:
                    </label>
                    <input type="number" name="stock" class="form-control form-control-md" placeholder="Number of Stock"
                      aria-label="stock" aria-describedby="text-addon" />
                  </div>
                </div>
                <!-- Fifth Row-->
                <div class="row justify-content-between text-left">
                  <div class="form-group col-sm-6 flex-column d-flex">
                    <!-- Category -->
                    <label for="category" class="form-check-label text-muted">Category:
                    </label>
                    <input type="text" name="category" class="form-control form-control-md mb-3" placeholder="Category"
                      aria-label="category" aria-describedby="text-addon" required />
                  </div>
                  <div class="form-group col-sm-6 flex-column d-flex">
                    <!-- Product Photo -->
                    <label for="productPhoto" class="form-check-label text-muted">Upload Image</label>
                    <input type="file" name="productPhotos" id="productPhoto" class="form-control form-control-md"
                      accept="image/*" onClick="removeInnerHTMLPreview(event)" onchange="showPreview(event);"
                      multiple />
                  </div>
                </div>
                <!-- Preview Row-->
                <div style="display: none; height:300px; overflow-y: auto;" id="imagePreview">
                  
                </div>
                <div class="row justify-content-center">
                  <div class="form-group col-sm-6">
                    <button type="submit" class="btn btn-md bg-gradient-primary w-100 mt-3 mb-0">
                      Add Product
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script type="text/javascript">
    function removeInnerHTMLPreview(event) {
      var preview = document.getElementById("imagePreview");
      var errorDiv = document.getElementById("errors");
      preview.innerHTML = '';
      preview.style.display = "none";
      errorDiv.style.display = "none";
    }
    function showPreview(event) {
      if (event.target.files.length > 0 && event.target.files.length <= 10) {
        var preview = document.getElementById("imagePreview");
        preview.innerHTML = '';
        
        var nextRow = 2;
        for (let index = 0; index < event.target.files.length; index++) {
          var src = URL.createObjectURL(event.target.files[index]);
          var row = preview;
          if (nextRow == 2) {
            row = document.createElement("div");
            row.className = "row justify-content-between text-left";
            row.id = "row" + (index);
            preview.appendChild(row);
            nextRow = 0;
          }

          const imgElement = document.createElement("img");
          imgElement.id = "productPhoto";
          imgElement.src = src;
          imgElement.style.marginBottom = "8px";

          var column = document.createElement("div");
          column.className = "form-group col-sm-6 flex-column d-flex";
          if (index == 1) {
            row = document.getElementById("row0");
            row.appendChild(column);
            column.appendChild(imgElement);
          }
          else if (index == 3) {
            row = document.getElementById("row2");
            row.appendChild(column);
            column.appendChild(imgElement);
          }
          else if (index == 5) {
            row = document.getElementById("row4");
            row.appendChild(column);
            column.appendChild(imgElement);
          }
          else if (index == 7) {
            row = document.getElementById("row6");
            row.appendChild(column);
            column.appendChild(imgElement);
          }
          else if (index == 9) {
            row = document.getElementById("row8");
            row.appendChild(column);
            column.appendChild(imgElement);
          }
          row.appendChild(column);
          column.appendChild(imgElement);
          nextRow++;
        }
        preview.style.display = "block";
      }
      else {
        if (event.target.files.length > 10) {
          var errorDiv = document.getElementById("errors");
          errorDiv.style.display = "block";
          errorDiv.innerHTML = "You can select only 10 images";
        }
        else if (event.target.files.length < 0) {
          var errorDiv = document.getElementById("errors");
          errorDiv.style.display = "block";
          errorDiv.innerHTML = "No Images Selected";
        }
        event.target.files = null;
      }
    }
  </script>
  <script src="/js/core/popper.min.js" type="text/javascript"></script>
  <script src="/js/core/bootstrap.min.js" type="text/javascript"></script>
  <script src="/js/plugins/perfect-scrollbar.min.js"></script>
  <!--  Plugin for Parallax, full documentation here: https://github.com/wagerfield/parallax  -->
  <script src="/js/plugins/parallax.min.js"></script>
  <!-- Control Center for Soft UI Kit: parallax effects, scripts for the example pages etc -->
  <!--  Google Maps Plugin    -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTTfWur0PDbZWPr7Pmq8K3jiDp0_xUziI"></script>
  <script src="/js/soft-design-system.min.js?v=1.0.5" type="text/javascript"></script>
</body>

</html>